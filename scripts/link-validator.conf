# SPDX-License-Identifier: Apache-2.0

// config for https://github.com/ennru/site-link-validator/
site-link-validator {
  root-dir = "./docs/target/site/"
  # relative to `root-dir`
  start-file = "docs/pekko-connectors/snapshot/index.html"

  # Resolves URLs with the given prefix as local files instead
  link-mappings = [
    {
      prefix = "https://pekko.apache.org/docs/pekko-connectors/snapshot/"
      replace = "/docs/pekko-connectors/snapshot/"
    }
    {
      prefix = "https://pekko.apache.org/api/pekko-connectors/snapshot/"
      replace = "/api/pekko-connectors/snapshot/"
    }
  ]

  ignore-missing-local-files-regex =
    "^api/pekko-connectors/snapshot/org/apache/pekko/stream/connectors/googlecloud/storage/impl/Formats.*"

  ignore-prefixes = [
    # Fails after a number of requests with "403 Forbidden"
    "https://javadoc.io/static/"
    # Slick API docs are not published correctly
    "https://scala-slick.org/doc/3.3.3/api/"
    # GitHub will block with "429 Too Many Requests"
    "https://github.com/"
    # MVN repository forbids access after a few requests
    "https://mvnrepository.com/artifact/"
    # Errors in Scaladoc from Google Common header `X-Upload-Content-Type`
    "https://doc.akka.io/api/akka-http/10.2.9/akka/http/impl/util/"
    # Broken license report links
    "http://glassfish.java.net/public/CDDL+GPL_1_1.html"
    "https://glassfish.java.net/public/CDDL+GPL_1_1.html"
    "http://jackson.codehaus.org"
    "http://java.net/projects/jms-spec/pages/Home"
    "http://jaxb.java.net/"
    "http://jetty.mortbay.org"
    "http://jta-spec.java.net"
    "http://propensive.com/"
    "http://servlet-spec.java.net"
    "http://websocket-spec.java.net"
    "https://jaxb.dev.java.net/"
    "https://jsr311.dev.java.net"
    "http://lmax-exchange.github.com/disruptor"
  ]

  non-https-whitelist = [
    # license report
    "http://logback.qos.ch/"
    "http://www.slf4j.org/"
    "http://reactivemongo.org"
    "http://www.thedevpiece.com/"
    "http://aopalliance.sourceforge.net"
    "http://asm.ow2.io/"
    "http://avro.apache.org"
    "http://beanvalidation.org"
    "http://checkerframework.org"
    "http://code.google.com/p/"
    "http://commons.apache.org/"
    "http://geode.apache.org"
    "http://couchbase.com"
    "http://creativecommons.org/publicdomain/zero/1.0/"
    "http://ehcache.org"
    "http://fastutil.di.unimi.it/"
    "http://findbugs.sourceforge.net/"
    "http://github.com/FasterXML/"
    "http://github.com/airlift/aircompressor"
    "http://github.com/google/"
    "http://github.com/jnr/"
    "http://github.com/julianhyde/eigenbase-properties"
    "http://github.com/sbt/junit-interface/"
    "http://github.com/square/javapoet/"
    "http://glassfish.java.net/public/CDDL+GPL_1_1.html"
    "http://hamcrest.org/JavaHamcrest/"
    # generated by @apidoc
    "http://pravega.io/"
    "http://www.scala-lang.org/api/2.13.13/scala/concurrent/Future.html"
    "http://www.scala-lang.org/api/2.13.13/scala/util/Try.html"
  ]
}
